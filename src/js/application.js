/*! For license information please see application.js.LICENSE.txt */
(()=>{"use strict";var t="src/js/proof.json";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var n=function(t){var e=document.getElementById("message");e?(e.style.display=t&&t.trim().length>0?"block":"none",e.textContent=t):console.error("Message element not found. Error message:",t)},o=function(){localStorage.clear(),localStorage.setItem("proofingPhase","Hamburgers"),location.reload()};function a(){var t=document.body,e="light"===(localStorage.getItem("colorMode")||"light")?"dark":"light";localStorage.setItem("colorMode",e),"light"===e?(t.removeAttribute("data-theme"),document.querySelector("#btn__mode-toggle .material-symbols-outlined").textContent="light_mode"):(t.setAttribute("data-theme","dark"),document.querySelector("#btn__mode-toggle .material-symbols-outlined").textContent="dark_mode")}function r(){var t=document.getElementById("btn__settings-toggle");document.body.classList.toggle("settings-visible"),t.classList.toggle("settings-visible")}var c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.618;if(!t)return e.toString();var o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:14,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.618;return{"t__size-xxl":Math.round(t*Math.pow(e,5)),"t__size-xl":Math.round(t*Math.pow(e,4)),"t__size-l":Math.round(t*Math.pow(e,3)),"t__size-m":Math.round(t*Math.pow(e,2)),"t__size-s":Math.round(t*Math.pow(e,1)),"t__size-xs":t}}(e,n),a=t.length;return a<25?o["t__size-xxl"]:a<50?o["t__size-xl"]:a<95?o["t__size-l"]:a<200?o["t__size-m"]:a<1e3?o["t__size-s"]:o["t__size-xs"]},i=function(t,e){if("undefined"!=typeof Storage)if("thisContent"!==e)localStorage.setItem(t,e);else{var n=document.getElementById(t).textContent;localStorage.setItem(t,n)}},l=function(t){var e=document.getElementById(t);if(e){var n=e.innerText;localStorage.setItem(t,n)}else console.warn("Element with ID ".concat(t," not found"))},s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return localStorage.getItem(t)||e};function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,a,r,c,i=[],l=!0,s=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=r.call(n)).done)&&(i.push(o.value),i.length!==e);l=!0);}catch(t){s=!0,a=t}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=f(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){i=!0,r=t},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw r}}}}function f(t,e){if(t){if("string"==typeof t)return m(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function p(){p=function(){return e};var t,e={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},c=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function u(t,e,n,o){var r=e&&e.prototype instanceof b?e:b,c=Object.create(r.prototype),i=new j(o||[]);return a(c,"_invoke",{value:F(t,n,i)}),c}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",m="suspendedYield",g="executing",h="completed",y={};function b(){}function S(){}function _(){}var w={};s(w,c,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(B([])));E&&E!==n&&o.call(E,c)&&(w=E);var I=_.prototype=b.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(a,r,c,i){var l=d(t[a],t,r);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==v(u)&&o.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,c,i)}),(function(t){n("throw",t,c,i)})):e.resolve(u).then((function(t){s.value=t,c(s)}),(function(t){return n("throw",t,c,i)}))}i(l.arg)}var r;a(this,"_invoke",{value:function(t,o){function a(){return new e((function(e,a){n(t,o,e,a)}))}return r=r?r.then(a,a):a()}})}function F(e,n,o){var a=f;return function(r,c){if(a===g)throw Error("Generator is already running");if(a===h){if("throw"===r)throw c;return{value:t,done:!0}}for(o.method=r,o.arg=c;;){var i=o.delegate;if(i){var l=T(i,o);if(l){if(l===y)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(a===f)throw a=h,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a=g;var s=d(e,n,o);if("normal"===s.type){if(a=o.done?h:m,s.arg===y)continue;return{value:s.arg,done:o.done}}"throw"===s.type&&(a=h,o.method="throw",o.arg=s.arg)}}}function T(e,n){var o=n.method,a=e.iterator[o];if(a===t)return n.delegate=null,"throw"===o&&e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),y;var r=d(a,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,y;var c=r.arg;return c?c.done?(n[e.resultName]=c.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):c:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function B(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function n(){for(;++a<e.length;)if(o.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}throw new TypeError(v(e)+" is not iterable")}return S.prototype=_,a(I,"constructor",{value:_,configurable:!0}),a(_,"constructor",{value:S,configurable:!0}),S.displayName=s(_,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===S||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,s(t,l,"GeneratorFunction")),t.prototype=Object.create(I),t},e.awrap=function(t){return{__await:t}},L(k.prototype),s(k.prototype,i,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,o,a,r){void 0===r&&(r=Promise);var c=new k(u(t,n,o,a),r);return e.isGeneratorFunction(n)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},L(I),s(I,l,"Generator"),s(I,c,(function(){return this})),s(I,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var o in e)n.push(o);return n.reverse(),function t(){for(;n.length;){var o=n.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},e.values=B,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(o,a){return i.type="throw",i.arg=e,n.next=o,a&&(n.method="next",n.arg=t),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var c=this.tryEntries[r],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=o.call(c,"catchLoc"),s=o.call(c,"finallyLoc");if(l&&s){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var c=r?r.completion:{};return c.type=t,c.arg=e,r?(this.method="next",this.next=r.finallyLoc,y):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var a=o.arg;C(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,o){return this.delegate={iterator:B(e),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),y}},e}function g(t,e,n,o,a,r,c){try{var i=t[r](c),l=i.value}catch(t){return void n(t)}i.done?e(l):Promise.resolve(l).then(o,a)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var r=t.apply(e,n);function c(t){g(r,o,a,c,i,"next",t)}function i(t){g(r,o,a,c,i,"throw",t)}c(void 0)}))}}var y=null,b=function(t,e,n){return new Promise(function(){var o=h(p().mark((function o(a,r){var c,i,l,s,u;return p().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,y=t,console.log("Font assigned globally: ".concat(n)),!("FontFace"in window)){o.next=9;break}return i=new FontFace(n,"url('".concat(e,"')"),{format:"truetype"===t.outlinesFormat?"truetype":"opentype"}),o.next=7,i.load();case 7:document.fonts.add(i),console.log("Font loaded successfully: ".concat(n));case 9:return l="\n\t\t  @font-face {\n\t\t\tfont-family: '".concat(n,"';\n\t\t\tsrc: url('").concat(e,"') format('").concat("truetype"===t.outlinesFormat?"truetype":"opentype","');\n\t\t  }\n\t\t"),(s=document.createElement("style")).textContent=l,document.head.appendChild(s),console.log("Font-face rule applied: ".concat(l)),window.fontFamily=n,console.log("Window.fontFamily set to: ".concat(n)),o.next=18,document.fonts.ready;case 18:return o.next=20,w(n);case 20:return["localhost","127.0.0.1",""].includes(location.hostname)&&(localStorage.setItem("fontFamily",n),localStorage.setItem("fontFamilySource",e),console.log("Font information saved to localStorage")),u=(null===(c=document.querySelector(".btn__stage.active"))||void 0===c||null===(c=c.dataset)||void 0===c?void 0:c.stage)||localStorage.getItem("proofingPhase")||window.proofingPhase||"Hamburgers",o.next=24,x(u);case 24:console.log("Stage set successfully"),a(),o.next=32;break;case 28:o.prev=28,o.t0=o.catch(0),console.error("Error in onFontLoaded:",o.t0),r(o.t0);case 32:case"end":return o.stop()}}),o,null,[[0,28]])})));return function(t,e){return o.apply(this,arguments)}}())},S=function(t){var e=t.target.files,n=document.getElementById("section__header-file-buttons");n.innerHTML="";var o=K();n.appendChild(o),Y(Array.from(e),"server").then((function(t){n.appendChild(t);var e=t.querySelector(".btn__setfont");e&&e.click()}))},_=function(){var t=h(p().mark((function t(e,o){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("Attempting to load font: ".concat(o," from ").concat(e)),opentype.load(e,(function(t,a){if(t)console.error("Error loading font:",t),n("Error loading font: ".concat(t));else{console.log("Font loaded successfully: ".concat(o)),y=a;try{b(a,e,o),x(localStorage.getItem("proofingPhase")||"Hamburgers")}catch(t){console.error("Error in onFontLoaded:",t),n("Error processing font: ".concat(t))}}}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),w=function(){var t=h(p().mark((function t(e){var n,o,a,r,c,i,l,s,u,d;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a="",t.t0=p().keys(y.tables);case 2:if((t.t1=t.t0()).done){t.next=20;break}if(o=t.t1.value,y.tables[o],"name"!==o){t.next=18;break}return r="",c=y.names.postScriptName?y.names.postScriptName.en:"Untitled Font",i=y.tables.head.fontRevision,l="Ver ".concat(i),r+='<div class="section__header-name-font" spellcheck="false">'.concat(c,"</div>"),r+='<div class="section__header-name-version" spellcheck="false">'.concat(l,"</div>"),a+='.t__importedfontfamily { font-family: "'.concat(e,'" }'),s=y.tables.head.modified,u="Last edited ".concat(new Date(1e3*s).toLocaleDateString()),r+='<div class="section__header-name-date">'.concat(u,"</div>"),document.getElementById("section__header-names").innerHTML=r,t.abrupt("continue",2);case 18:t.next=2;break;case 20:document.getElementById("style__fontfamily").innerHTML=a,d=(null===(n=document.querySelector(".btn__stage.active"))||void 0===n||null===(n=n.dataset)||void 0===n?void 0:n.stage)||localStorage.getItem("proofingPhase")||window.proofingPhase||"Hamburgers",x(d);case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(e){var n=document.getElementById("section__article-app"),o=document.getElementById("section__header-stage-buttons");if(!y)return console.warn("Font not loaded yet. Deferring stage setting."),void(window.pendingStage=e);fetch(t).then((function(t){return t.json()})).then((function(t){var a=E(t,e),r=O(t,e);n.innerHTML=a,o.innerHTML=r,document.getElementById("style__opentype-features").innerHTML="",i("proofingPhase",e),X();var c="true"===localStorage.getItem("lockProofDimensions");nt(c)})).catch((function(t){return console.error("Error loading JSON:",t)}))},E=function(t,e){var n;if(!t[e])return'<div class="item d-flex t__center"><div class="item__proof">No features found! :...(</div></div>';var o=y.names.postScriptName.en,a=y.tables.head.fontRevision,r="Ver ".concat(a),i=(null===(n=y.tables.gsub)||void 0===n?void 0:n.features)||{},l=Object.values(i).filter((function(t){return"object"===v(t)&&t.tag})).map((function(t){return t.tag})).filter((function(e){return void 0!==t.Features[e]||e.startsWith("ss")})),s="";for(var u in t[e])if("Features"!==e||l.includes(u)){var f=c(t[e][u]),m="section__proofing-".concat(u),p="item--".concat(u),g="".concat(p),h=I(g,f),b=h.fontSize,S=h.lineHeight,_=h.letterSpacing,w=(h.inlineStyle,L(p));s+='\n      <div id="'.concat(p,'" class="item">\n        <button class="btn btn-link add-item-above chip" onclick="insertField(\'').concat(p,'\')">+ Add Proof Window</button>\n        <div class="item__container d-flex">\n          <div class="item__sliders pt-2">\n            <div class="item__sliders-wrapper">\n              ').concat(k(p,g,b,S,_),"\n              ").concat(F(p,g),"\n              ").concat(C(p),"\n              ").concat(j(p,t,l),'\n            </div>\n          </div>\n          <div class="item__proof ratio-letter">\n            <button class="btn btn-link remove-item-this invisible" onclick="removeElementsByID(\'').concat(p,"')\">×</button>\n            ").concat(B(e,u,t,m,w,f),'\n            <div class="item__footer d-flex justify-content-between">\n              <span class="item__footer-name-font">').concat(o,'</span>\n              <span class="item__footer-name-version">').concat(r,"</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    ")}var x=JSON.parse(localStorage.getItem("customProofWindows")||"{}");if(x[e]&&x[e].length>0){var E,T=d(x[e]);try{for(T.s();!(E=T.n()).done;){var A=E.value,z="section__proofing-custom-".concat(A),H=I(A,"text-xl"),q=H.fontSize,O=H.lineHeight,P=H.letterSpacing,N=H.inlineStyle,M=L(A),V=localStorage.getItem("".concat(z,"-title"))||"Custom Proof Window",D=localStorage.getItem(z)||"This is a custom proof window. Type your text here.";s+='\n        <div id="'.concat(A,'" class="item custom-item">\n          <button class="btn btn-link add-item-above chip" onclick="insertField(\'').concat(A,'\')">+ Add Proof Window</button>\n          <div class="item__container d-flex">\n            <div class="item__sliders pt-2">\n              <div class="item__sliders-wrapper">\n                ').concat(k(A,A,q,O,P),"\n                ").concat(F(A,A),"\n                ").concat(C(A),"\n                ").concat(j(A,t,l),'\n                <div class="mt-2">\n                  <button class="btn btn-sm btn-danger d-flex align-items-center g-1" onclick="removeCustomProofWindow(\'').concat(A,'\')">\n                    <span class="material-symbols-outlined">delete</span>\n                    Remove this window\n                  </button>\n                </div>\n              </div>\n            </div>\n            <div class="item__proof ratio-letter">\n              <div class="d-flex justify-content-between">\n                <h6 class="h6" contentEditable="true" \n                    id="').concat(z,'-title"\n                    onkeyup="saveEditableContent(\'').concat(z,"-title')\">").concat(V,'</h6>\n              </div>\n              <div class="testarea-container">\n                <div id="').concat(z,'" \n                     style="').concat(N," ").concat(M,'" \n                     class="t__importedfontfamily testarea" \n                     contenteditable="true" \n                     spellcheck="false" \n                     onkeyup="saveEditableContent(\'').concat(z,"')\">\n                  ").concat(D,'\n                </div>\n              </div>\n              <div class="item__footer d-flex justify-content-between">\n                <span class="item__footer-name-font">').concat(o,'</span>\n                <span class="item__footer-name-version">').concat(r,"</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      ")}}catch(t){T.e(t)}finally{T.f()}}return s},I=function(t,e){var n,o,a,r=parseFloat((null===(n=document.getElementById("select__type-scale"))||void 0===n?void 0:n.value)||1.618),c=parseFloat((null===(o=document.getElementById("input__base-font-size"))||void 0===o?void 0:o.value)||14),i=(null===(a=document.querySelector("#".concat(t," .testarea")))||void 0===a?void 0:a.textContent)||e,l=at(t,i,c,r),s=rt(t),u=localStorage.getItem("".concat(t,"-letterSpacing"))||"0",d=localStorage.getItem("".concat(t,"-column-count"))||"1",f=localStorage.getItem("".concat(t,"-column-gap"))||"1em";return{fontSize:l,lineHeight:s,letterSpacing:u,columnCount:d,columnGap:f,inlineStyle:"\n    font-size: ".concat(l,"pt;\n    line-height: ").concat(s,";\n    letter-spacing: ").concat(u,"em;\n    column-count: ").concat(d,";\n    column-gap: ").concat(f,";\n  ")}},L=function(t){var e="";return y.tables.fvar&&(y.tables.fvar.axes.map((function(t){return t.tag})),e="font-variation-settings: "+y.tables.fvar.axes.map((function(e){var n=localStorage.getItem("".concat(t,"-").concat(e.tag,"-val")),o=null!==n?n:e.defaultValue;return"'".concat(e.tag,"' ").concat(o)})).join(", ")+";"),e},k=function(t,e,n,o,a){var r=null!==localStorage.getItem("".concat(t,"-lineHeight")),c=null!==localStorage.getItem("".concat(t,"-fontSize")),i=null!==localStorage.getItem("".concat(t,"-letterSpacing"));return'\n    <div>\n      <label for="'.concat(e,'-fontSize">Font Size</label>\n      <span class="t__right text-small" id="').concat(e,'-fontSize-val">').concat(n,'pt</span>\n      <span class="t__right material-symbols-outlined remove" onclick="removeStyleValue(\'').concat(t,"', 'fontSize')\">clear</span>\n      <input id=\"").concat(e,'-fontSize" type="range" class="slider ').concat(c?"modified":"",'" \n        min="4" max="160" step="2" value="').concat(n,'" \n        oninput="passStyleValue(\'').concat(t,"', 'fontSize', this.value)\">\n    </div>\n    <div>\n      <label for=\"").concat(e,'-lineHeight">Line Height</label>\n      <span class="t__right text-small" id="').concat(e,'-lineHeight-val">').concat(o,'</span>\n      <span class="t__right material-symbols-outlined remove" onclick="removeStyleValue(\'').concat(t,"', 'lineHeight')\">clear</span>\n      <input id=\"").concat(e,'-lineHeight" type="range" class="slider ').concat(r?"modified":"",'" \n        min="0.6" max="3.0" step="0.01" value="').concat(o,'" \n        oninput="passStyleValue(\'').concat(t,"', 'lineHeight', this.value)\">\n    </div>\n    <div>\n      <label for=\"").concat(e,'-letterSpacing">Letter Spacing </label>\n      <span class="t__right text-small" id="').concat(e,'-letterSpacing-val">').concat(a,'em</span>\n      <span class="t__right material-symbols-outlined remove" onclick="removeStyleValue(\'').concat(t,"', 'letterSpacing')\">clear</span>\n      <input id=\"").concat(e,'-letterSpacing" type="range" class="slider ').concat(i?"modified":"",'" \n        min="-0.4" max="0.4" step="0.01" value="').concat(a,'" \n        oninput="passStyleValue(\'').concat(t,"', 'letterSpacing', this.value)\">\n    </div>\n  ")},F=function(t,e){return y.tables.fvar?y.tables.fvar.axes.map((function(n){var o=localStorage.getItem("".concat(t,"-").concat(n.tag,"-val")),a=null!==o?o:n.defaultValue;return'\n      <label for="'.concat(e,"-").concat(n.tag,'">').concat(n.name.en,' </label>\n      <span class="t__right text-small" id="').concat(e,"-").concat(n.tag,'-val">').concat(a,'</span>\n      <input id="').concat(e,"-").concat(n.tag,'" type="range" class="slider" min="').concat(n.minValue,'" max="').concat(n.maxValue,'" value="').concat(a,'" oninput="passfvarValue(\'').concat(t,"', '").concat(n.tag,"', this.value, '").concat(y.tables.fvar.axes.map((function(t){return t.tag})).join(","),"')\">\n    ")})).join(""):""},T=function(){var t=h(p().mark((function t(e){var n,o,a,r,c,i,l,s=arguments;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("local"!==(n=s.length>1&&void 0!==s[1]?s[1]:"local")){t.next=11;break}return o=e.replace(".","-"),a="fonts/".concat(e),c=e.replace("-"," ").replace(/\.[^/.]+$/,""),r=e.split(".").pop().toUpperCase(),t.next=8,A(a);case 8:i=t.sent,t.next=18;break;case 11:return o=e.name.replace(".","-"),a=URL.createObjectURL(e),c=e.name.replace("-"," ").replace(/\.[^/.]+$/,""),r=e.name.split(".").pop().toUpperCase(),t.next=17,A(e);case 17:i=t.sent;case 18:return i&&(r="VF"),(l=document.createElement("div")).className="btn__setfont chip btn d-flex justify-content-between",l.title="local"===n?e:e.name,l.id="btn__setfont-".concat(o),l.innerHTML="".concat(c,'<span class="d-flex-grow text-small text-right">').concat(r,"</span>"),l.onclick=function(t){if(t.shiftKey)return document.querySelectorAll(".btn__setfont").forEach((function(t){t.classList.remove("secondary")})),l.classList.add("secondary"),localStorage.setItem("secondaryFontPath",a),localStorage.setItem("secondaryFontName",o),void lt(a,o);document.querySelectorAll(".btn__setfont").forEach((function(t){t.classList.remove("active"),t.classList.remove("visited"),t.classList.contains("secondary")||t.classList.remove("secondary")})),l.classList.add("active"),l.classList.add("visited"),_(a,o)},t.abrupt("return",l);case 26:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=function(){var t=h(p().mark((function t(e){var n,o,a;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"string"!=typeof e){t.next=10;break}return t.next=4,fetch(e);case 4:return o=t.sent,t.next=7,o.arrayBuffer();case 7:n=t.sent,t.next=13;break;case 10:return t.next=12,e.arrayBuffer();case 12:n=t.sent;case 13:return a=opentype.parse(n),t.abrupt("return",void 0!==a.tables.fvar);case 17:return t.prev=17,t.t0=t.catch(0),console.error("Error checking if font is variable:",t.t0),t.abrupt("return",!1);case 21:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}();window.updateColumns=function(t){var e=document.getElementById("".concat(t,"-column-count")).value,n=document.getElementById("".concat(t,"-column-gap")).value;q(t,"column-count",e),q(t,"column-gap",n)};var C=function(t){return'\n  <div id="btn__wrapper-case">\n    <label>Case</label>\n    <div class="d-flex g-1 btn__wrapper">\n      <button class="btn btn-link textTransform-uppercase" title="Uppercase" onclick="passStyleValue(\''.concat(t,"','textTransform', 'uppercase')\">TT</button>\n      <button class=\"btn btn-link textTransform-capitalize\" title=\"Capitalize\" onclick=\"passStyleValue('").concat(t,"','textTransform', 'capitalize')\">Tt</button>\n      <button class=\"btn btn-link textTransform-lowercase\" title=\"Lowercase\" onclick=\"passStyleValue('").concat(t,'\',\'textTransform\', \'lowercase\')">tt</button>\n    </div>\n  </div>\n  <div id="btn__wrapper-columns">\n    <label>Columns</label>\n    <div class="d-flex g-1 btn__wrapper">\n\t<span class="text-small">Count</span>\n      <input class="input" type="number" id="').concat(t,'-column-count" min="1" max="6" value="1" onchange="updateColumns(\'').concat(t,'\')" style="width: 50px;">\n\t<span class="text-small">Gap</span>\n      <input class="input" type="text" id="').concat(t,'-column-gap" value="10px" onchange="updateColumns(\'').concat(t,'\')" style="width: 50px;">\n    </div>\n  </div>\n')},j=function(t,e,n){var o,a=function(t){if(Array.isArray(t))return m(t)}(o=new Set(n))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||f(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return'\n      <label>Features</label>  \n      <div class="btn__wrapper d-flex flex-wrap g-0">\n        '.concat(a.map((function(n){var o,r=function(t,e,n){var o;if(e.startsWith("ss")){var a=parseInt(e.slice(2),10);if(a>=1&&a<=20){var r,c=a-1+256;return(null==t||null===(r=t.names)||void 0===r||null===(r=r[c])||void 0===r?void 0:r.en)||"Stylistic Set ".concat(a)}}return(null===(o=n.Features)||void 0===o||null===(o=o[e])||void 0===o?void 0:o.abstract)||e}(y,n,e),c=(null===(o=e.Features)||void 0===o||null===(o=o[n])||void 0===o?void 0:o.definition)||"";return'\n            <div title="'.concat(c,'" class="chip d-flex align-items-center justify-content-between d-flex-grow" onclick="document.getElementById(\'').concat(t,"-checkbox-").concat(n,'\').click()">\n              <input id="').concat(t,"-checkbox-").concat(n,'" type="checkbox" onclick="passfeatValue(\'').concat(t,"', '").concat(n,"', '").concat(a.join(","),'\')">\n              <span class="d-flex-grow">').concat(r,'</span>\n              <span class="tag-label text-small">').concat(n,"</span>\n            </div>\n          ")})).join(""),"\n      </div>\n    ")},B=function(t,e,n,o,a,r){if(!n||!n[t]||!n[t][e])return console.warn("Missing proof data:",{stage:t,title:e}),"";var i=n[t][e];"Features"===t&&(i=n[t][e].sample||"");var l=s(o,i)||"",u=s("".concat(o,"-title"),e)||"",d=c(l),f=rt(o),m=localStorage.getItem("".concat(o,"-letterSpacing"))||"0em",v=localStorage.getItem("".concat(o,"-column-count"))||"1",p=localStorage.getItem("".concat(o,"-column-gap"))||"1em",g="\n      font-size: ".concat(d,"pt;\n      line-height: ").concat(f,";\n      letter-spacing: ").concat(m,";\n      column-count: ").concat(v,";\n      column-gap: ").concat(p,";\n    ");return'\n      <div class="d-flex justify-content-between">\n        <h6 class="h6" contentEditable="true" \n            id="'.concat(o,'-title"\n            onkeyup="saveEditableContent(\'').concat(o,"-title')\">").concat(u,'</h6>\n      </div>\n      <div class="testarea-container">\n        <div id="').concat(o,'" \n             style="').concat(g," ").concat(a,'" \n             class="t__importedfontfamily testarea" \n             contenteditable="true" \n             spellcheck="false" \n             onkeyup="saveEditableContent(\'').concat(o,"')\">\n          ").concat(l,"\n        </div>\n      </div>\n    ")},z=function(t,e,n){var o=document.querySelector("#".concat(t," .testarea-values"));if(o){var a=document.querySelector("#".concat(t,"-fontSize")),r=document.querySelector("#".concat(t,"-lineHeight")),c=document.querySelector("#".concat(t,"-letterSpacing")),i={"font-size":"".concat((null==a?void 0:a.value)||"14","pt"),"line-height":(null==r?void 0:r.value)||"1.0","letter-spacing":"".concat((null==c?void 0:c.value)||"0","em")},l=Object.entries(i).map((function(t){var e=u(t,2),n=e[0],o=e[1];return"".concat(n,": ").concat(o)})).join("; ");o.innerHTML=generateTestAreaValues(l)}},H=function(){return localStorage.getItem("proofingPhase")||"Hamburgers"},q=function(t,e,n){var o="-".concat(e,"-val"),a=document.querySelector('[id$="'.concat(t).concat(o,'"]'));if(["fontSize","lineHeight","letterSpacing","column-count","column-gap"].includes(e)){localStorage.setItem("".concat(t,"-").concat(e),n);var r=n;"fontSize"===e&&(r+="pt"),"letterSpacing"===e&&(r+="em"),a&&(a.textContent=r);var c=document.querySelector("#".concat(t,"-").concat(e));c&&c.classList.add("modified")}var i=document.querySelector("#".concat(t," .testarea"));if(i){var l=n;"fontSize"===e&&(l+="pt"),"letterSpacing"===e&&(l+="em"),i.style[e]=l}z(t)};window.removeStyleValue=function(t,e){var n;if(localStorage.removeItem("".concat(t,"-").concat(e)),"fontSize"===e){var o,a,r=document.querySelector("#".concat(t," .testarea")),i=(null==r?void 0:r.textContent)||"",l=parseFloat((null===(o=document.getElementById("select__type-scale"))||void 0===o?void 0:o.value)||1.618),s=parseFloat((null===(a=document.getElementById("input__base-font-size"))||void 0===a?void 0:a.value)||14);n=c(i,s,l)}else n="lineHeight"===e?ct():"0";var u=document.querySelector("#".concat(t,"-").concat(e));u&&(u.value=n,u.classList.remove("modified"));var d=document.querySelector("#".concat(t,"-").concat(e,"-val"));if(d){var f=n;"fontSize"===e&&(f+="pt"),"letterSpacing"===e&&(f+="em"),d.textContent=f}var m=document.querySelector("#".concat(t," .testarea"));if(m){var v=n;"fontSize"===e&&(v+="pt"),"letterSpacing"===e&&(v+="em"),m.style[e]=v}z(t)};var O=function(t,e){var n=JSON.parse(localStorage.getItem("hiddenTabs")||"[]"),o=Object.keys(t).filter((function(t){return!n.includes(t)}));if(0===o.length&&Object.keys(t).length>0){var a="Hamburgers"in t?"Hamburgers":Object.keys(t)[0];o.push(a);var r=n.filter((function(t){return t!==a}));localStorage.setItem("hiddenTabs",JSON.stringify(r))}return o.map((function(t){return'\n      <div class="tab-item '.concat(t===e?"active":"",' tab__setstage" onclick="setStage(\'').concat(t,'\')">\n      <a href="#" class="stage-button d-flex justify-content-between g-2">\n        <span class="stage-name">\n        ').concat(t,'\n        </span>\n        <span class="t__right tab-remove material-symbols-outlined remove" \n          onclick="event.stopPropagation(); removeTab(\'').concat(t,"')\">\n        clear\n        </span>\n      </a>\n      </div>\n    ")})).join("")};window.removeTab=function(e){var n=JSON.parse(localStorage.getItem("hiddenTabs")||"[]");n.includes(e)||(n.push(e),localStorage.setItem("hiddenTabs",JSON.stringify(n)));var o=localStorage.getItem("proofingPhase");o===e?fetch(t).then((function(t){return t.json()})).then((function(t){var e=Object.keys(t),o=e.filter((function(t){return!n.includes(t)}));if(o.length>0)x(o[0]);else{var a="Hamburgers"in t?"Hamburgers":e[0];n.splice(n.indexOf(a),1),localStorage.setItem("hiddenTabs",JSON.stringify(n)),x(a)}})):fetch(t).then((function(t){return t.json()})).then((function(t){document.getElementById("section__header-stage-buttons").innerHTML=O(t,o)}))};var P=window.localStorageClear;window.localStorageClear=function(){P(),localStorage.removeItem("hiddenTabs")};var N=function(){var t=document.getElementById("section__header-file-buttons");fetch("../src/txt/fonts.txt").then((function(t){return t.text()})).then((function(n){var o,a,r=n.split("fonts/").filter((function(t){return""!==t.trim()})).map((function(t){return t.trim()})),c=(o=r.sort(),function(t){if(Array.isArray(t))return e(t)}(a=new Set(o))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(a)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());if(0===c.length)t.innerHTML="Place fonts you want to proof into <code>/fonts</code> to begin";else{var i=K();t.appendChild(i),Y(c,"local").then((function(e){t.appendChild(e);var n=localStorage.getItem("fontFamilySource")||"fonts/".concat(c[c.length-1]),o=localStorage.getItem("fontFamily")||n.replace(".","-");_(n,o)}))}})).catch((function(e){console.error("Error loading fonts:",e),t.innerHTML="Place fonts you want to proof into <code>/fonts</code> to begin"}))};function M(t){t.preventDefault(),t.stopPropagation()}function V(t){document.getElementById("drag-drop-area").classList.add("highlight")}function D(t){document.getElementById("drag-drop-area").classList.remove("highlight")}function W(t){J(t.dataTransfer.files)}function J(t){var e;e=t instanceof Event?t.target.files:t;var n=(e=Array.from(e)).map((function(t){return function(t){return new Promise((function(e){S({target:{files:[t]}}),setTimeout(e,50)}))}(t)}));Promise.all(n).then((function(){setTimeout((function(){var t=document.querySelector(".btn__setfont");t&&t.click()}),100)}))}var G=function(t){t.target.classList.contains("btn__setfont")&&(t.target.classList.add("active","visited"),Array.from(t.target.parentNode.children).filter((function(e){return e!==t.target})).forEach((function(t){return t.classList.remove("active")})))},U=function(t){t.target.classList.contains("btn__setstage")&&(t.target.classList.add("active"),Array.from(t.target.parentNode.children).filter((function(e){return e!==t.target})).forEach((function(t){return t.classList.remove("active")})))},R=function(){document.body.classList.toggle("tools-visible")},$=function(){document.addEventListener("paste",(function(t){if(t.target.classList.contains("testarea")){t.preventDefault();var e=(t.clipboardData||window.clipboardData).getData("text/plain"),n=window.getSelection();if(n.rangeCount){var o=n.getRangeAt(0);o.deleteContents(),o.insertNode(document.createTextNode(e))}else t.target.textContent+=e;var a=new Event("keyup");t.target.dispatchEvent(a)}}))},Y=function(){var t=h(p().mark((function t(e){var n,o,a,r,c,i,l=arguments;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=l.length>1&&void 0!==l[1]?l[1]:"local",document.createElement("div").className="font-buttons-container",(o=document.createElement("div")).className="font-chips",a=d(e),t.prev=6,a.s();case 8:if((r=a.n()).done){t.next=16;break}return c=r.value,t.next=12,T(c,n);case 12:i=t.sent,o.appendChild(i);case 14:t.next=8;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(6),a.e(t.t0);case 21:return t.prev=21,a.f(),t.finish(21);case 24:return t.abrupt("return",o);case 25:case"end":return t.stop()}}),t,null,[[6,18,21,24]])})));return function(e){return t.apply(this,arguments)}}(),K=function(){var t=document.createElement("div");t.className="btn-group d-flex g-1 mb-2 font-nav-group";var e=document.createElement("button");e.className="btn d-flex align-items-center justify-content-between d-flex-grow",e.innerHTML='<span class="material-symbols-outlined">chevron_left</span> Prev',e.onclick=function(){return Q("prev")};var n=document.createElement("button");n.className="btn font-play-btn d-flex align-items-center justify-content-center",n.title="Auto-cycle through fonts",n.innerHTML='<span class="material-symbols-outlined">play_arrow</span>',n.setAttribute("data-playing","false"),n.onclick=ut;var o=document.createElement("button");return o.className="btn d-flex align-items-center justify-content-between d-flex-grow",o.innerHTML='Next <span class="material-symbols-outlined">chevron_right</span>',o.onclick=function(){return Q("next")},t.appendChild(e),t.appendChild(n),t.appendChild(o),t},Q=function(t){var e=document.querySelectorAll(".btn__setfont"),n=document.querySelector(".btn__setfont.active");if(e.length){var o=0;if(n){var a=Array.from(e).indexOf(n);o="next"===t?(a+1)%e.length:(a-1+e.length)%e.length}e[o].click()}},X=function(){var t,e,n=parseFloat((null===(t=document.getElementById("select__type-scale"))||void 0===t?void 0:t.value)||1.618),o=parseFloat((null===(e=document.getElementById("input__base-font-size"))||void 0===e?void 0:e.value)||14);document.querySelectorAll(".item").forEach((function(t){var e=t.id,a=t.querySelector(".testarea"),r=(null==a?void 0:a.textContent)||"",c=rt(e),i=at(e,r,o,n);a&&(a.style.fontSize="".concat(i,"pt"),a.style.lineHeight=c);var l=t.querySelector("#".concat(e,"-fontSize")),s=t.querySelector("#".concat(e,"-fontSize-val"));l&&(l.value=i,localStorage.getItem("".concat(e,"-fontSize"))&&l.classList.add("modified")),s&&(s.textContent="".concat(i,"pt"))}))},Z=function(){var t,e,n=parseFloat((null===(t=document.getElementById("select__type-scale"))||void 0===t?void 0:t.value)||1.618),o=parseFloat((null===(e=document.getElementById("input__base-font-size"))||void 0===e?void 0:e.value)||14);localStorage.setItem("preferred-scale",n),document.querySelectorAll(".item").forEach((function(t){var e=t.id,a=t.querySelector(".testarea"),r=(null==a?void 0:a.textContent)||"",c=at(e,r,o,n),i=rt(e);a&&(a.style.fontSize="".concat(c,"pt"),a.style.lineHeight=i);var l=t.querySelector("#".concat(e,"-fontSize")),s=t.querySelector("#".concat(e,"-fontSize-val"));l&&(l.value=c,localStorage.getItem("".concat(e,"-fontSize"))&&l.classList.add("modified")),s&&(s.textContent="".concat(c,"pt")),it(e,i)}))},tt=function(){var t=ct();localStorage.setItem("line-height",t),document.querySelectorAll(".item").forEach((function(e){var n=e.id;localStorage.getItem("".concat(n,"-lineHeight"))||it(n,t)}))},et=function(t){var e=t.target.checked;localStorage.setItem("showNameAndVersion",e),document.body.classList.toggle("show-font-details",e)},nt=function(t){document.querySelectorAll(".item__proof").forEach((function(e){t?e.classList.add("locked-dimensions"):e.classList.remove("locked-dimensions")}))},ot=function(t){var e=t.target.checked;localStorage.setItem("lockProofDimensions",e),nt(e)},at=function(t,e,n,o){var a=localStorage.getItem("".concat(t,"-fontSize"));return null!==a?parseFloat(a):c(e,n,o)},rt=function(t){return parseFloat(localStorage.getItem("".concat(t,"-lineHeight"))||ct())},ct=function(){var t;return parseFloat((null===(t=document.getElementById("input__line-height"))||void 0===t?void 0:t.value)||localStorage.getItem("line-height")||1)},it=function(t,e){var n=document.getElementById(t);if(n){var o=n.querySelector(".testarea"),a=n.querySelector("#".concat(t,"-lineHeight")),r=n.querySelector("#".concat(t,"-lineHeight-val")),c=n.querySelector(".testarea-values");if(o&&(o.style.lineHeight=e),a&&(a.value=e),r&&(r.textContent=e),c){var i={"font-size":(null==o?void 0:o.style.fontSize)||"14pt","line-height":"".concat(e),"letter-spacing":(null==o?void 0:o.style.letterSpacing)||"0em"};c.innerHTML=generateTestAreaValues(Object.entries(i).map((function(t){var e=u(t,2),n=e[0],o=e[1];return"".concat(n,": ").concat(o)})).join("; "))}}},lt=function(t,e){console.log("Applying secondary font: ".concat(e," from ").concat(t)),opentype.load(t,(function(o,a){if(o)return console.error("Error loading secondary font:",o),void n("Error loading secondary font: ".concat(o));if(window.secondaryFont=a,"FontFace"in window){var r="".concat(e,"-secondary"),c=new FontFace(r,"url('".concat(t,"')"),{format:"truetype"===a.outlinesFormat?"truetype":"opentype"});c.load().then((function(){document.fonts.add(c),console.log("Secondary font loaded successfully: ".concat(r));var e="\n          @font-face {\n            font-family: '".concat(r,"';\n            src: url('").concat(t,"') format('").concat("truetype"===a.outlinesFormat?"truetype":"opentype","');\n          }\n        "),n=document.getElementById("style__secondary-font");n||((n=document.createElement("style")).id="style__secondary-font",document.head.appendChild(n)),n.textContent=e,n.textContent+="\n          .testarea em, .testarea i, .testarea .emphasis {\n            font-family: '".concat(r,"', var(--font-secondary, sans-serif) !important;\n          }\n        ");var o=localStorage.getItem("proofingPhase")||"Hamburgers";x(o)}))}}))},st=null,ut=function(t){var e=t.currentTarget;"true"===e.getAttribute("data-playing")?(ft(),e.innerHTML='<span class="material-symbols-outlined">play_arrow</span>',e.setAttribute("data-playing","false")):(dt(),e.innerHTML='<span class="material-symbols-outlined">pause</span>',e.setAttribute("data-playing","true"))},dt=function(){ft();var t=document.getElementById("input__cycle-speed"),e=t?parseInt(t.value,10):300,n=Math.max(100,e);st=setInterval((function(){Q("next")}),n)},ft=function(){st&&(clearInterval(st),st=null)},mt=function(){var t=document.getElementById("input__cycle-speed");if(t){var e=localStorage.getItem("font-cycle-speed");e&&(t.value=e),t.addEventListener("change",(function(){localStorage.setItem("font-cycle-speed",t.value);var e=document.querySelector(".font-play-btn");e&&"true"===e.getAttribute("data-playing")&&dt()}))}};window.removeCustomProofWindow=function(t){var e=JSON.parse(localStorage.getItem("customProofWindows")||"{}"),n=H();if(e[n]){var o=e[n].indexOf(t);-1!==o&&(e[n].splice(o,1),localStorage.setItem("customProofWindows",JSON.stringify(e)))}var a=document.getElementById(t);a&&a.remove()},window.addEventListener("unhandledrejection",(function(t){console.error("Unhandled promise rejection:",t.reason)})),window.addEventListener("error",(function(t){console.error("Uncaught error:",t.error)})),window.setFont=_,window.onReadFile=S,window.setStage=x,window.passStyleValue=q,window.passfvarValue=function(t,e,n,o){var a=document.getElementById("".concat(t,"-").concat(e,"-val"));a?a.textContent=n:console.warn("Element with ID ".concat(t,"-").concat(e,"-val not found.")),i("".concat(t,"-").concat(e,"-val"),n);var r=o.split(",").map((function(o){var a,r=o===e?n:null===(a=document.getElementById("".concat(t,"-").concat(o)))||void 0===a?void 0:a.value;return"'".concat(o,"' ").concat(r)})).join(", "),c=document.querySelector("#".concat(t," .testarea"));c?c.style.fontVariationSettings=r:console.warn("Test area with ID ".concat(t," not found.")),z(t)},window.passfeatValue=function(t,e,n){for(var o=n.split(","),a="",r=0;r<o.length;r++)document.getElementById("".concat(t,"-checkbox-").concat(o[r])).checked&&(a+="'".concat(o[r],"',"));a=a.replace(/,\s*$/,""),document.querySelector("#".concat(t," .testarea")).style.fontFeatureSettings=a},window.insertField=function(t){var e=document.getElementById(t),n=e.cloneNode(!0),o=Date.now(),a="custom-item-".concat(o),r=e.id;n.id=a,n.querySelectorAll("[id]").forEach((function(t){t.id="".concat(t.id,"-clone-").concat(o)})),n.querySelectorAll("[oninput]").forEach((function(t){var e=t.getAttribute("oninput").replace(new RegExp("'".concat(r,"'"),"g"),"'".concat(a,"'"));t.setAttribute("oninput",e)})),n.querySelectorAll("[onclick]").forEach((function(t){var e=t.getAttribute("onclick").replace(new RegExp("'".concat(r,"'"),"g"),"'".concat(a,"'"));t.setAttribute("onclick",e)})),n.querySelectorAll("input").forEach((function(t){"range"===t.type||(t.value="")}));var c=n.querySelector(".testarea");c&&(c.innerHTML="This is a new custom proof window. Type your text here.",l(c.id));var i=n.querySelector('[id$="-title"]');i&&(i.innerHTML="Custom Proof Window",l(i.id)),e.parentNode.insertBefore(n,e),n.style.height="0px",n.style.overflow="hidden",n.style.transition="height 0.6s ease",setTimeout((function(){n.style.height="".concat(n.scrollHeight,"px")}),0),setTimeout((function(){var t,e,o;n.style.height="auto",n.style.overflow="visible",t=a,e=H(),(o=JSON.parse(localStorage.getItem("customProofWindows")||"{}"))[e]||(o[e]=[]),o[e].includes(t)||(o[e].push(t),localStorage.setItem("customProofWindows",JSON.stringify(o)),console.log('Added custom window "'.concat(t,'" to stage "').concat(e,'"')),console.log("Custom windows:",JSON.stringify(o)))}),600)},window.localStorageClear=o,window.saveEditableContent=l,window.saveInputValue=function(t){var e=document.getElementById(t);e?localStorage.setItem(t,e.value):console.warn("Element with ID ".concat(t," not found"))};var vt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{t||!["localhost","127.0.0.1",""].includes(location.hostname)?function(){var t=document.getElementById("section__header-file-buttons");_("fonts/gooper-VF.ttf","gooper-VF-ttf"),document.getElementById("style__fontface").innerHTML='@font-face { font-family: "gooper-VF-ttf"; src: url("fonts/gooper-VF.ttf");}',t.innerHTML='\n\t  <div id="drag-drop-area" class="drag-drop-area">\n\t\t<p>Drag & drop font files here</p>\n\t\t<p>or</p>\n\t\t<label for="fontInput" class="file-input-label">Choose Files</label>\n\t\t<input id="fontInput" type="file" class="file-input" multiple accept=".ttf,.otf,.woff,.woff2" />\n\t  </div>\n\t';var e=document.getElementById("drag-drop-area"),n=document.getElementById("fontInput");["dragenter","dragover","dragleave","drop"].forEach((function(t){e.addEventListener(t,M,!1),document.body.addEventListener(t,M,!1)})),["dragenter","dragover"].forEach((function(t){e.addEventListener(t,V,!1)})),["dragleave","drop"].forEach((function(t){e.addEventListener(t,D,!1)})),e.addEventListener("drop",W,!1),n.addEventListener("change",J,!1)}():N(),function(){var t=document.getElementById("section__header-file-buttons"),e=document.getElementById("section__header-stage-buttons"),n=document.getElementById("btn__view-tools-toggle"),c=document.getElementById("btn__mode-toggle"),i=document.getElementById("btn__reset-local-storage"),l=document.getElementById("btn__settings-toggle"),s=document.getElementById("checkbox__add-name-and-version"),u=document.getElementById("checkbox__lock-proof-dimensions");if(t&&t.addEventListener("click",G),e&&e.addEventListener("click",U),n&&n.addEventListener("click",R),c&&c.addEventListener("click",a),i&&i.addEventListener("click",o),l&&l.addEventListener("click",r),s){var d="true"===localStorage.getItem("showNameAndVersion");s.checked=d,document.body.classList.toggle("show-font-details",d),s.addEventListener("change",et)}if(u){var f="true"===localStorage.getItem("lockProofDimensions");u.checked=f,nt(f),u.addEventListener("change",ot)}$();var m=document.getElementById("select__aspect-ratio");if(m){document.querySelectorAll(".item__proof").forEach((function(t){return t.classList.add("ratio-letter")})),m.addEventListener("change",(function(t){var e=t.target.value;document.querySelectorAll(".item__proof").forEach((function(t){t.classList.remove("ratio-letter","ratio-a4"),t.classList.add("8.5:11"===e?"ratio-letter":"ratio-a4")})),localStorage.setItem("preferred-ratio",e)}));var v=localStorage.getItem("preferred-ratio");v&&(m.value=v,m.dispatchEvent(new Event("change")))}var p=document.getElementById("input__base-font-size");if(p){p.addEventListener("change",(function(t){var e=parseFloat(t.target.value);localStorage.setItem("base-font-size",e),Z()}));var g=localStorage.getItem("base-font-size")||"14";p.value=g}var h=document.getElementById("input__line-height");if(h){h.addEventListener("change",(function(t){var e=parseFloat(t.target.value);localStorage.setItem("line-height",e),tt()}));var y=ct();h.value=y}var b,S,_=document.getElementById("select__type-scale");_&&_.addEventListener("change",(function(){Z()})),b=localStorage.getItem("colorMode")||"light",S=document.body,"dark"===b?(S.setAttribute("data-theme","dark"),document.querySelector("#btn__mode-toggle .material-symbols-outlined").textContent="dark_mode"):(S.removeAttribute("data-theme"),document.querySelector("#btn__mode-toggle .material-symbols-outlined").textContent="light_mode"),mt()}(),document.body.classList.add("loaded")}catch(t){console.error("Error during initialization:",t)}};document.addEventListener("DOMContentLoaded",(function(){return vt(!1)}))})();
//# sourceMappingURL=application.js.map